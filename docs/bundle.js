!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}({0:function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},13:function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return o.android()||o.blackberry()||o.ios()||o.opera()||o.windows()}},a=o;var c={init:function(){!function(){var e=[-74.331,41.261];mapboxgl.accessToken="pk.eyJ1IjoiZG9jazQyNDIiLCJhIjoiY2pjazE5eTM2NDl2aDJ3cDUyeDlsb292NiJ9.Jr__XbmAolbLyzPDj7-8kQ";var t=new mapboxgl.Map({container:"map",style:"mapbox://styles/dock4242/cjnugndzr4rkn2spbxk0cnps5?optimize=true",center:[e[0],e[1]],zoom:6,pitch:0,bearing:0,interactive:!1});t.scrollZoom.disable(),t.on("load",function(e){t.setLayoutProperty("place-city-large","visibility","visible")});var n=new ScrollMagic.Controller,i=0,r=0;new ScrollMagic.Scene({triggerElement:"#fixed-map",duration:d3.select(".scroll__text").node().getBoundingClientRect().height-Math.max(document.documentElement.clientHeight,window.innerHeight||0)/2,offset:0,triggerHook:0}).setPin("#fixed-map",{pushfollowers:!1}).addTo(n),new ScrollMagic.Scene({triggerElement:"#tilt-shift-step",duration:d3.select("#tilt-shift-step").node().getBoundingClientRect().height,offset:0,triggerHook:.5}).on("progress",function(e){var n=e.progress;(n=Math.round(50*n)/50)!=i&&(i=n,t.jumpTo({pitch:60*i,bearing:0}))}).addTo(n),new ScrollMagic.Scene({triggerElement:"#rotate-step",duration:d3.select("#rotate-step").node().getBoundingClientRect().height,offset:0,triggerHook:.5}).on("progress",function(e){var n=e.progress;(n=Math.round(50*n)/50)!=r&&(r=n,t.jumpTo({bearing:-65.6*r,pitch:60}))}).addTo(n)}();var e="pk.eyJ1IjoiZG9jazQyNDIiLCJhIjoiY2pjazE5eTM2NDl2aDJ3cDUyeDlsb292NiJ9.Jr__XbmAolbLyzPDj7-8kQ",t=!0,n=7,i=d3.select("#content").node().getBoundingClientRect().width,r=2;i-200<1500&&(r=3);var o=Math.floor((i-200)/r),a=o+20,c=d3.select(".single-year-wrapper").selectAll("div").data([{city_name:"Hong Kong",city_id:"hong_kong",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[113.570587,22.78],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:0,pitch:60}},{city_name:"Lagos",city_id:"lagos",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[3.32,6.58],pathString:"qeii@kzpSfftB{p_BzkeAf~vAiqxBzp_B",zoom:7.13,bearing:0,pitch:60}},{city_name:"Kinshasa",city_id:"kinshasa",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[15.31,-4.36],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:0,pitch:60}},{city_name:"New York City",city_id:"new_york_city",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[-73.98,40.76],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:-33.19,pitch:60}},{city_name:"London",city_id:"london",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[-.23,51.43],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:-19.59,pitch:60}},{city_name:"Paris",city_id:"paris",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[2.228,48.88],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:-19.59,pitch:60}},{city_name:"Karachi",city_id:"kirachi",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[67.065,24.95],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:73.21,pitch:60}},{city_name:"Bangalore",city_id:"bangalore",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[77.511,13.109],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:-23.18,pitch:60}},{city_name:"Mexico City",city_id:"mexico_city",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[-99.12,19.319],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:.74,pitch:60}},{city_name:"Singapore",city_id:"singapore",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[103.838,1.411],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:8.63,bearing:-38.48,pitch:60}}]).enter().append("div").attr("class","img-wrapper"),s=c.append("div").attr("class","text-column"),l=c.append("div").attr("class","swiper-container");function p(i,r,c){console.log(c);var s=i.location,l=s.bearing,p=s.pitch,d=s.center[1],f=s.center[0],u=s.zoom,g=s.pathString,h="";t&&(u=n);var m="cjnugndzr4rkn2spbxk0cnps5";return"3D"!=c&&(p=0),"medium"==r&&(u=4.6,m="cjo5tayip0w952rpski8ml7w0"),"3D"!=c&&"medium"!=r&&"close"!=r&&(h="path-2+444-0.8+f44-0("+g+")/"),"far"==r&&(u=3.6,m="cjo5tayip0w952rpski8ml7w0"),"super-far"==r&&(u=2.6,m="cjo5tayip0w952rpski8ml7w0",h="path-2+444-0.8+f44-0("+g+")/"),"3D"!=c&&"close"!=r&&(p=0,m="cjo7b0rly2am02sqoz0b4zs0y",h="path-2+444-0.8+f44-0("+g+")/"),"3D"!=c&&"close"==r&&(m="cjo7bhuwn056i2srxhhqjer8v"),"https://api.mapbox.com/styles/v1/dock4242/"+m+"/static/"+h+f+","+d+","+u+","+l+","+p+"/"+o+"x"+a+"?access_token="+e}s.append("p").attr("class","city-name").html(function(e){return e.city_name}),s.append("p").attr("class","city-desc").html(function(e){return e.city_text}),s.append("div").attr("class","city-toggles").selectAll("div").data(["3D","overhead"]).enter().append("div").attr("class","city-toggle").classed("city-toggle-active",function(e,t){return console.log(t),0==t}).on("click",function(e){!function(e,t){var n=t.city_id;l.filter(function(e,t){return e.city_id==n}).selectAll(".swiper-slide").select("img").attr("src",function(t){return p(d3.select(this.parentNode.parentNode).datum(),t,e)})}(e,d3.select(this.parentNode).datum()),d3.select(this.parentNode).selectAll(".city-toggle").classed("city-toggle-active",!1),d3.select(this).classed("city-toggle-active",!0)}).append("p").attr("class","city-toggle-text").html(function(e){return e});var d=l.append("div").attr("class","swiper-wrapper");l.append("div").attr("class","swiper-pagination"),d.selectAll("div").data(["close","medium","far","super-far"]).enter().append("div").attr("class","swiper-slide").style("width",o+"px").style("height",a+"px").append("img").style("width",o+"px").style("height",a+"px").attr("src",function(e){return p(d3.select(this.parentNode.parentNode).datum(),e,"3D")}),l.each(function(e,t,n){new Swiper(n,{spaceBetween:30,slidesPerView:r,grabCursor:!0,pagination:{el:".swiper-pagination",clickable:!0}})}),d3.json("assets/data/world.json",function(e){var t=s.append("div").attr("width","64px").attr("height","64px").attr("class","globe-wrapper");t.append("div").attr("class","globe-wrapper-svg-container").html('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" viewBox="0 -256 1792 1792" id="svg3025" version="1.1" inkscape:version="0.48.3.1 r9886" width="100%" height="100%"> <g transform="matrix(1,0,0,-1,364.47458,1270.2373)"> <path d="m 768,896 q 0,106 -75,181 -75,75 -181,75 -106,0 -181,-75 -75,-75 -75,-181 0,-106 75,-181 75,-75 181,-75 106,0 181,75 75,75 75,181 z m 256,0 q 0,-109 -33,-179 L 627,-57 q -16,-33 -47.5,-52 -31.5,-19 -67.5,-19 -36,0 -67.5,19 Q 413,-90 398,-57 L 33,717 Q 0,787 0,896 q 0,212 150,362 150,150 362,150 212,0 362,-150 150,-150 150,-362 z" id="path3029" inkscape:connector-curvature="0" /> </g> </svg>'),t.append("canvas").attr("width",64).attr("height",64).each(function(t){console.log(t);var n=d3.geoOrthographic().translate([32,32]).scale(27).rotate([-t.location.center[0],-t.location.center[1]]).clipAngle(90),i=n([t.location.center[0],t.location.center[1]]);d3.select(this.parentNode).select(".globe-wrapper-svg-container").style("transform","translate("+i[0]+"px,"+i[1]+"px)");var r=d3.select(this).node().getContext("2d"),o=d3.geoPath().projection(n).context(r),a=topojson.feature(e,e.objects.land);r.clearRect(0,0,64,64),r.beginPath(),r.arc(32,32,27,0,2*Math.PI,!0),r.fillStyle="#002930",r.fill(),r.beginPath(),o(a),r.fillStyle="#fff",r.fill()})})},resize:function(){}},s=d3.select("body"),l=0;function p(){var e=s.node().offsetWidth;l!==e&&(l=e,c.resize())}s.classed("is-mobile",a.any()),window.addEventListener("resize",r()(p,150)),function(){if(s.select("header").classed("is-sticky")){var e=s.select(".header__menu"),t=s.select(".header__toggle");t.on("click",function(){var n=e.classed("is-visible");e.classed("is-visible",!n),t.classed("is-visible",!n)})}}(),c.init()},2:function(e,t,n){(function(t){var n="Expected a function",i=NaN,r="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,p="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,f=p||d||Function("return this")(),u=Object.prototype.toString,g=Math.max,h=Math.min,m=function(){return f.Date.now()};function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&u.call(e)==r}(e))return i;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=c.test(e);return n||s.test(e)?l(e.slice(2),n?2:8):a.test(e)?i:+e}e.exports=function(e,t,i){var r,o,a,c,s,l,p=0,d=!1,f=!1,u=!0;if("function"!=typeof e)throw new TypeError(n);function w(t){var n=r,i=o;return r=o=void 0,p=t,c=e.apply(i,n)}function b(e){var n=e-l;return void 0===l||n>=t||n<0||f&&e-p>=a}function x(){var e=m();if(b(e))return j(e);s=setTimeout(x,function(e){var n=t-(e-l);return f?h(n,a-(e-p)):n}(e))}function j(e){return s=void 0,u&&r?w(e):(r=o=void 0,c)}function _(){var e=m(),n=b(e);if(r=arguments,o=this,l=e,n){if(void 0===s)return function(e){return p=e,s=setTimeout(x,t),d?w(e):c}(l);if(f)return s=setTimeout(x,t),w(l)}return void 0===s&&(s=setTimeout(x,t)),c}return t=v(t)||0,y(i)&&(d=!!i.leading,a=(f="maxWait"in i)?g(v(i.maxWait)||0,t):a,u="trailing"in i?!!i.trailing:u),_.cancel=function(){void 0!==s&&clearTimeout(s),p=0,r=l=o=s=void 0},_.flush=function(){return void 0===s?c:j(m())},_}}).call(this,n(0))}});