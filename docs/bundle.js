!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=13)}({0:function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},13:function(e,t,i){"use strict";i.r(t);var n=i(2),r=i.n(n),o={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return o.android()||o.blackberry()||o.ios()||o.opera()||o.windows()}},a=o;var c={init:function(){!function(){var e=[-74.331,41.261];mapboxgl.accessToken="pk.eyJ1IjoiZG9jazQyNDIiLCJhIjoiY2pjazE5eTM2NDl2aDJ3cDUyeDlsb292NiJ9.Jr__XbmAolbLyzPDj7-8kQ";var t=new mapboxgl.Map({container:"map",style:"mapbox://styles/dock4242/cjnugndzr4rkn2spbxk0cnps5?optimize=true",center:[e[0],e[1]],zoom:6,pitch:0,bearing:0,interactive:!1});t.scrollZoom.disable(),t.on("load",function(e){t.setLayoutProperty("place-city-large","visibility","visible")});var i=new ScrollMagic.Controller,n=0,r=0;new ScrollMagic.Scene({triggerElement:"#fixed-map",duration:d3.select(".scroll__text").node().getBoundingClientRect().height-Math.max(document.documentElement.clientHeight,window.innerHeight||0)/2,offset:0,triggerHook:0}).setPin("#fixed-map",{pushfollowers:!1}).addTo(i),new ScrollMagic.Scene({triggerElement:"#tilt-shift-step",duration:d3.select("#tilt-shift-step").node().getBoundingClientRect().height,offset:0,triggerHook:.5}).on("progress",function(e){var i=e.progress;(i=Math.round(50*i)/50)!=n&&(n=i,t.jumpTo({pitch:60*n,bearing:0}))}).addTo(i),new ScrollMagic.Scene({triggerElement:"#rotate-step",duration:d3.select("#rotate-step").node().getBoundingClientRect().height,offset:0,triggerHook:.5}).on("progress",function(e){var i=e.progress;(i=Math.round(50*i)/50)!=r&&(r=i,t.jumpTo({bearing:-65.6*r,pitch:60}))}).addTo(i)}();var e="pk.eyJ1IjoiZG9jazQyNDIiLCJhIjoiY2pjazE5eTM2NDl2aDJ3cDUyeDlsb292NiJ9.Jr__XbmAolbLyzPDj7-8kQ",t=!0,i=7,n=d3.select("#content").node().getBoundingClientRect().width,r=Math.floor((n-200)/3),o=r+20,a=d3.select(".single-year-wrapper").selectAll("div").data([{city_name:"Hong Kong",city_id:"hong_kong",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[113.570587,22.78],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:0,pitch:60}},{city_name:"Lagos",city_id:"lagos",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[3.32,6.58],pathString:"qeii@kzpSfftB{p_BzkeAf~vAiqxBzp_B",zoom:7.13,bearing:0,pitch:60}},{city_name:"Kinshasa",city_id:"kinshasa",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[15.31,-4.36],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:-82.38,pitch:60}},{city_name:"New York City",city_id:"new_york_city",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[-73.98,40.76],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:-33.19,pitch:60}},{city_name:"London",city_id:"london",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[-.23,51.43],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:-19.59,pitch:60}},{city_name:"Paris",city_id:"paris",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[2.228,48.88],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:-19.59,pitch:60}},{city_name:"Karachi",city_id:"kirachi",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[67.065,24.95],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:73.21,pitch:60}},{city_name:"Bangalore",city_id:"bangalore",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[77.511,13.109],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:-23.18,pitch:60}},{city_name:"Mexico City",city_id:"mexico_city",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[-99.12,19.319],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:7.13,bearing:.74,pitch:60}},{city_name:"Singapore",city_id:"singapore",city_text:"The world’s population centers are a lot different than 25 years ago. In 1993, there were 14 cities over 10 million people. Today, there are 34, with many of these new “megacities” sprouting from farmland in our lifetimes.",location:{center:[103.838,1.411],pathString:"knxnCswrnT}qVaj~FveoI{fsDpvfAjuoH",zoom:8.63,bearing:-38.48,pitch:60}}]).enter().append("div").attr("class","img-wrapper"),c=a.append("div").attr("class","text-column"),s=a.append("div").attr("class","swiper-container");c.append("p").attr("class","city-name").html(function(e){return e.city_name}),c.append("p").attr("class","city-desc").html(function(e){return e.city_text});var l=c.append("div").attr("class","city-toggles").selectAll("div").data(["3D","overhead"]).enter().append("div").attr("class","city-toggle").classed("city-toggle-active",function(e,t){return 0==t}).on("click",function(e){!function(e,t){var i=t.city_id;s.filter(function(e,t){return e.city_id==i}).selectAll(".swiper-slide").select("img").attr("src",function(t){return p(d3.select(this.parentNode.parentNode).datum(),t,e)})}(e,d3.select(this.parentNode).datum()),l.classed("city-toggle-active",!1),d3.select(this).classed("city-toggle-active",!0)});function p(n,a,c){var s=n.location,l=s.bearing,p=s.pitch,f=s.center[1],u=s.center[0],d=s.zoom,m=s.pathString,g="";t&&(d=i),"3D"!=c&&(p=0);var h="cjnugndzr4rkn2spbxk0cnps5";return"medium"==a&&(d=4.6,h="cjo5tayip0w952rpski8ml7w0"),"3D"!=c&&"medium"!=a&&"close"!=a&&(g="path-2+007aff-0.8+f44-0("+m+")/"),"far"==a&&(d=3.6,h="cjo5tayip0w952rpski8ml7w0"),"super-far"==a&&(d=2.6,h="cjo5tayip0w952rpski8ml7w0",g="path-2+007aff-0.8+f44-0("+m+")/"),"https://api.mapbox.com/styles/v1/dock4242/"+h+"/static/"+g+u+","+f+","+d+","+l+","+p+"/"+r+"x"+o+"?access_token="+e}l.append("p").attr("class","city-toggle-text").html(function(e){return e});var f=s.append("div").attr("class","swiper-wrapper");s.append("div").attr("class","swiper-pagination"),f.selectAll("div").data(["close","medium","far","super-far"]).enter().append("div").attr("class","swiper-slide").style("width",r+"px").style("height",o+"px").append("img").style("width",r+"px").style("height",o+"px").attr("src",function(e){return p(d3.select(this.parentNode.parentNode).datum(),e,"3D")}),s.each(function(e,t,i){new Swiper(i,{spaceBetween:5,slidesPerGroup:1,grabCursor:!0,trackValues:!0,slidesPerView:"auto",slideToClickedSlide:!0,pagination:{el:".swiper-pagination",clickable:!0}})})},resize:function(){}},s=d3.select("body"),l=0;function p(){var e=s.node().offsetWidth;l!==e&&(l=e,c.resize())}s.classed("is-mobile",a.any()),window.addEventListener("resize",r()(p,150)),function(){if(s.select("header").classed("is-sticky")){var e=s.select(".header__menu"),t=s.select(".header__toggle");t.on("click",function(){var i=e.classed("is-visible");e.classed("is-visible",!i),t.classed("is-visible",!i)})}}(),c.init()},2:function(e,t,i){(function(t){var i="Expected a function",n=NaN,r="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,p="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,u=p||f||Function("return this")(),d=Object.prototype.toString,m=Math.max,g=Math.min,h=function(){return u.Date.now()};function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&d.call(e)==r}(e))return n;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var i=c.test(e);return i||s.test(e)?l(e.slice(2),i?2:8):a.test(e)?n:+e}e.exports=function(e,t,n){var r,o,a,c,s,l,p=0,f=!1,u=!1,d=!0;if("function"!=typeof e)throw new TypeError(i);function w(t){var i=r,n=o;return r=o=void 0,p=t,c=e.apply(n,i)}function b(e){var i=e-l;return void 0===l||i>=t||i<0||u&&e-p>=a}function _(){var e=h();if(b(e))return j(e);s=setTimeout(_,function(e){var i=t-(e-l);return u?g(i,a-(e-p)):i}(e))}function j(e){return s=void 0,d&&r?w(e):(r=o=void 0,c)}function x(){var e=h(),i=b(e);if(r=arguments,o=this,l=e,i){if(void 0===s)return function(e){return p=e,s=setTimeout(_,t),f?w(e):c}(l);if(u)return s=setTimeout(_,t),w(l)}return void 0===s&&(s=setTimeout(_,t)),c}return t=v(t)||0,y(n)&&(f=!!n.leading,a=(u="maxWait"in n)?m(v(n.maxWait)||0,t):a,d="trailing"in n?!!n.trailing:d),x.cancel=function(){void 0!==s&&clearTimeout(s),p=0,r=l=o=s=void 0},x.flush=function(){return void 0===s?c:j(h())},x}}).call(this,i(0))}});